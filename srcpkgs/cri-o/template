# Template file for 'cri-o'
pkgname=cri-o
version=1.12.1
revision=1
build_style=go
go_import_path="github.com/kubernetes-sigs/cri-o"
hostmakedepends="git pkg-config gpgme-devel libglib-devel"
makedepends="gpgme-devel libglib-devel"
short_desc="OCI-based implementation of Kubernetes Container Runtime Interface"
maintainer="Kyle Nusbaum <knusbaum+void@sdf.org>"
license="Apache-2.0"
homepage="https://github.com/kubernetes-sigs/cri-o"
distfiles="https://github.com/kubernetes-sigs/cri-o/archive/v${version}.tar.gz"
checksum=81158b0ab14ea70c29365184e5b0b75e4b169d99852d61905f104ae776973a79

pre_build() {
	GOOS='' GOARCH='' CGO_CFLAGS='' CGO_CXXFLAGS='' CC=/bin/gcc \
		make install.tools
}

do_build() {
	CFLAGS='-fPIC' make
}

do_install() {
	make install PREFIX=${DESTDIR}/usr
}
